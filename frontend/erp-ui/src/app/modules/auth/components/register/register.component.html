<div
  *ngIf="showSuccess"
  class="fixed right-5 top-[calc(var(--navbar-height)+1rem)] z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 animate-fade-in"
>
  <span>{{ successText }}</span>
</div>

<!-- Registration form -->
<div class="flex items-start justify-center min-h-[calc(100vh-64px)] pt-10">
  <div class="w-full max-w-lg bg-white shadow-2xl rounded-2xl p-10 border border-gray-200">
    <p class="text-gray-500 text-sm mb-1">Create your account</p>
    <h2 class="text-3xl font-semibold mb-8">Sign up</h2>

    <form (ngSubmit)="onSubmit()" class="flex flex-col gap-5">
      <!-- Username -->
      <div>
        <label class="block text-base text-gray-600 mb-2">Username</label>
        <input
          [(ngModel)]="username"
          (ngModelChange)="validateLive()"
          name="username"
          type="text"
          placeholder="Enter your username"
          class="w-full border border-gray-300 rounded-lg px-4 py-3 text-base focus:ring-2 focus:ring-blue-500 focus:outline-none shadow-sm"
          required
        />
        <p *ngIf="usernameError" class="text-red-500 text-sm mt-1">{{ usernameError }}</p>
      </div>

      <!-- Email -->
      <div>
        <label class="block text-base text-gray-600 mb-2">Email address</label>
        <input
          [(ngModel)]="email"
          (ngModelChange)="validateLive()"
          name="email"
          type="email"
          placeholder="Enter your email"
          class="w-full border border-gray-300 rounded-lg px-4 py-3 text-base focus:ring-2 focus:ring-blue-500 focus:outline-none shadow-sm"
          required
        />
        <p *ngIf="emailError" class="text-red-500 text-sm mt-1">{{ emailError }}</p>
      </div>

      <!-- Password -->
      <div>
        <div class="flex items-center justify-between mb-2">
          <label class="block text-base text-gray-600">Password</label>
          <button type="button" (click)="pwd.type = pwd.type === 'password' ? 'text' : 'password'" class="text-gray-500 hover:text-gray-700" aria-label="Toggle password visibility">
            <svg *ngIf="pwd.type === 'password'" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.644C3.423 7.51 7.36 5 12 5c4.64 0 8.577 2.51 9.964 6.678.07.207.07.437 0 .644C20.577 16.49 16.64 19 12 19c-4.64 0-8.577-2.51-9.964-6.678z"/>
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
            </svg>
            <svg *ngIf="pwd.type !== 'password'" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 001.934 12C3.322 16.168 7.259 18.678 11.9 18.678c1.68 0 3.274-.31 4.72-.872M6.228 6.228A10.45 10.45 0 011.9 5.322c4.64 0 8.577 2.51 9.964 6.678-.424 1.25-1.087 2.39-1.94 3.36M3 3l18 18"/>
            </svg>
          </button>
        </div>
        <input
          [(ngModel)]="password"
          (ngModelChange)="validateLive()"
          name="password" #pwd
          type="password"
          placeholder="Enter your password"
          class="w-full border border-gray-300 rounded-lg px-4 py-3 text-base focus:ring-2 focus:ring-blue-500 focus:outline-none shadow-sm"
          required
        />
        
        <p *ngIf="passwordError" class="text-red-500 text-sm mt-1">{{ passwordError }}</p>
      </div>

      <button
        type="submit"
        class="w-full bg-primary-600 hover:bg-primary-700 text-white py-3 rounded-lg text-base font-medium transition-colors shadow-md"
      >
        Create Account
      </button>

      <p class="text-center text-gray-600 text-sm mt-3">
        Already have an account?
        <a (click)="goToLogin()" class="text-blue-600 hover:underline font-medium cursor-pointer">
          Login
        </a>
      </p>
    </form>
  </div>
</div>

